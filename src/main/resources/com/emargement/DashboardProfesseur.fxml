<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.emargement.controller.DashboardProfesseurController">

    <!-- TOP BAR -->
    <top>
        <HBox spacing="20" BorderPane.alignment="CENTER_LEFT">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15" />
            </padding>

            <Label fx:id="topDateLabel" text="--/--/----" />
            <Label text="/" />
            <Label fx:id="topSubjectLabel" text="Matière" />

            <Pane HBox.hgrow="ALWAYS" />
            <Label text="☀" />
        </HBox>
    </top>

    <!-- LEFT SIDEBAR -->
    <left>
        <VBox spacing="20">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20" />
            </padding>

            <Label fx:id="welcomeLabel" text="Bonjour, Prof" />
            <Separator />

            <VBox spacing="10">
                <Label text="Dashboard" />
                <Button text="Accueil" maxWidth="Infinity" />
                <Button text="Liste des étudiants" maxWidth="Infinity" />
                <Button text="Mes matières" maxWidth="Infinity" />
            </VBox>

            <Pane VBox.vgrow="ALWAYS" />

            <Button fx:id="logoutButton"
                    text="Déconnexion"
                    onAction="#handleLogout"
                    maxWidth="Infinity" />
        </VBox>
    </left>

    <!-- CENTER : Liste des étudiants -->
    <center>
        <VBox spacing="15">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20" />
            </padding>

            <Label text="Liste des étudiants" />

            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                <content>
                    <ListView fx:id="studentListView" />
                </content>
            </ScrollPane>
        </VBox>
    </center>

    <!-- RIGHT : Code / QR / Validation -->
    <right>
        <VBox spacing="20">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20" />
            </padding>

            <HBox spacing="10">
                <Button fx:id="codeModeButton" text="CODE" onAction="#handleCodeMode" />
                <Button fx:id="qrModeButton" text="CODE QR" onAction="#handleQrMode" />
            </HBox>

            <VBox spacing="10">
                <Label text="Code de signature" />
                <Label fx:id="codeValueLabel"
                       text="----"
                       style="-fx-font-size: 36px; -fx-font-weight: bold;" />
            </VBox>

            <ImageView fx:id="qrImageView"
                       fitWidth="200"
                       fitHeight="200"
                       preserveRatio="true"
                       visible="false"
                       managed="false" />

            <!-- Removed "Generate Code" button -->

            <Pane VBox.vgrow="ALWAYS" />

            <Button fx:id="validateButton"
                    text="VALIDER"
                    onAction="#handleSaveAttendance"
                    maxWidth="Infinity"
                    prefHeight="40" />
        </VBox>
    </right>

</BorderPane>
